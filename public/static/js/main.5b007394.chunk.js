/*! For license information please see main.5b007394.chunk.js.LICENSE.txt */
(this.webpackJsonpparrot=this.webpackJsonpparrot||[]).push([[0],[,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),r=a.n(n),c=a(3),s=a(81),i=a.n(s).a.create({withCredentials:!0}),u={get:function(e,t){return l(e,"GET",t)},delete:function(e,t){return l(e,"DELETE",t)},put:function(e,t){return l(e,"PUT",t)},post:function(e,t){return l(e,"POST",t)}};function l(e,t){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t,a){var n,c,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=1,e.next=4,i({url:"".concat("/api/").concat(t),method:a,data:n});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"chatService",(function(){return p}));var n=a(1),r=a.n(n),c=a(3),s=a(10);function i(){return(i=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.type,n=t._id,e.abrupt("return",s.a.get("chat/".concat("direct"===a?"direct/"+n:n)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.put("chat/".concat(t._id),t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.put("chat/direct/".concat(t._id),t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.post("chat/create",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("removind",t),e.abrupt("return",s.a.delete("chat/".concat(t)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p={getChatData:function(e){return i.apply(this,arguments)},updatePublicChatData:function(e){return u.apply(this,arguments)},updatePrivateChatData:function(e){return l.apply(this,arguments)},createNewChannel:function(e){return o.apply(this,arguments)},removeChannel:function(e){return m.apply(this,arguments)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(194)},,,,,,,,,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),s=a.n(c),i=a(6),u=a(25),l=a(19),o=a(4);var m={isAuth:"Verifying"};var p=a(78),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,d=Object(u.c)({chatMessagesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHAT_DATA":return Object(o.a)({},t.chatData);case"ADD_MESSAGE":return Object(o.a)(Object(o.a)({},e),{},{messages:[].concat(Object(l.a)(e.messages),[t.message])});case"CREATE_CHANNEL":return Object(o.a)({},t.channel);case"ADD_NEW_MEMBERS":return Object(o.a)(Object(o.a)({},e),{},{sharedUsers:[].concat(Object(l.a)(e.sharedUsers),[t.members])});case"REMOVE_MEMBER_FROM_CHANNEL":return Object(o.a)(Object(o.a)({},e),{},{sharedUsers:e.sharedUsers.filter((function(e){return e._id!==t.member._id}))});case"TOGGLE_PINNED":return Object(o.a)(Object(o.a)({},e),{},{messages:e.messages.map((function(e){return e.id!==t.msgId?e:Object(o.a)(Object(o.a)({},e),{},{isPinned:!e.isPinned})}))});case"REMOVE_MSG":return Object(o.a)(Object(o.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==t.msgId}))});case"ADD_REACTION":return Object(o.a)(Object(o.a)({},e),{},{messages:e.messages.map((function(e){if(e.id===t.msgId){var a=e.reactions[t.reaction];e.reactions[t.reaction]=a?++a:1}return e}))});case"ADD_REPLY":return Object(o.a)(Object(o.a)({},e),{},{messages:e.messages.map((function(e){return e.id===t.msgId&&e.replies.push(t.reply),e}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED_USER":return Object(o.a)(Object(o.a)({},e),{},{isAuth:!0},t.userData);case"ADD_CHANNEL":return Object(o.a)(Object(o.a)({},e),{},{channels:[].concat(Object(l.a)(e.channels),[t.channel])});case"ADD_PRIVATE_CHAT":return Object(o.a)(Object(o.a)({},e),{},{directMessages:[].concat(Object(l.a)(e.directMessages),[t.pmData])});case"REMOVE_CHANNEL":return Object(o.a)(Object(o.a)({},e),{},{channels:e.channels.filter((function(e){return e._id!==t.channelId}))});case"REMOVE_PRIVATE_CHAT":return Object(o.a)(Object(o.a)({},e),{},{directMessages:e.directMessages.filter((function(e){return e._id!==t.id}))});default:return e}},workSpaceReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE_DATA":return Object(o.a)({},t.workSpaceData);case"SET_USERS_STATUS":return Object(o.a)(Object(o.a)({},e),{},{onlineUsers:t.users});case"UPDATE_USER_SETTINGS":return Object(o.a)(Object(o.a)({},e),{},{sharedUsers:e.sharedUsers.map((function(e){return e._id===t.user._id?t.user:e}))});default:return e}}}),h=Object(u.e)(d,f(Object(u.a)(p.a))),v=a(30),b=a(8),E=a(5),g=(a(100),a(1)),N=a.n(g),O=a(3),x=a(12),w=(a(102),a(10));function j(){return(j=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.post("auth/login",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(O.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.get("auth/check-token"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.post("auth/signup",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={login:function(e){return j.apply(this,arguments)},authUserToken:function(){return y.apply(this,arguments)},signup:function(e){return k.apply(this,arguments)}};function C(){return(C=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.get("user/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.put("user/".concat(t._id),t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T={updateUser:function(e){return D.apply(this,arguments)},getUserById:function(e){return C.apply(this,arguments)}},_=a(47),M=function(e){return{type:"SET_LOGGED_USER",userData:e}},R=function(e){return{type:"UPDATE_USER",user:e}},P=function(e){return{type:"ADD_CHANNEL",channel:e}},I=function(e){return{type:"ADD_PRIVATE_CHAT",pmData:e}};function U(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(I(e));case 3:return t.next=5,T.updateUser(n().userReducer);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}var A={checkCredentials:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.login(e);case 3:return n=t.sent,a(M(n)),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},L=Object(i.b)(null,A)((function(e){var t=e.loginHandler,a=e.checkCredentials,c=Object(n.useState)({email:"ravit@gmail.com",password:"1234"}),s=Object(E.a)(c,2),i=s[0],u=s[1],l=function(e){var t=e.target,a=t.id;u((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(x.a)({},a,t.value))}))},m=function(){var e=Object(O.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(i);case 2:n=e.sent,console.log(n),n&&t(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"right-side-login flex col"},r.a.createElement("section",{className:"login-form flex col"},r.a.createElement("h3",{className:"form-title"},"Log In"),r.a.createElement("label",{className:"flex align-center"},r.a.createElement("i",{className:"form-icon fas fa-at"}),r.a.createElement("input",{id:"email",type:"text",placeholder:"Email",onChange:l,value:i.email})),r.a.createElement("label",{className:"flex align-center"},r.a.createElement("i",{className:"form-icon fas fa-lock"}),r.a.createElement("input",{id:"password",type:"password",placeholder:"Password",onChange:l,value:i.password})),r.a.createElement("button",{onClick:m,className:"login-btn"},"Login")))}));a(119);var F={addNewUser:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.signup(e);case 3:if(n=t.sent,r=n.err,c=n.user,console.log("err",r,"user",c),!r){t.next=8;break}return t.abrupt("return",{err:r,sucsses:!1});case 8:return a(M(c)),t.abrupt("return",{user:c,sucsses:!0});case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}},H=Object(i.b)(null,F)((function(e){var t=e.addNewUser,a=Object(n.useState)(!1),c=Object(E.a)(a,2),s=c[0],i=c[1],u=Object(n.useState)({email:"ravit@gmail.com",password:"1234",verifyPassword:"1234"}),l=Object(E.a)(u,2),m=l[0],p=l[1],f=Object(n.useState)({email:"",password:"",verifyPassword:""}),d=Object(E.a)(f,2),h=d[0],v=d[1],g=function(e){var t=e.target,a=t.id;p((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(x.a)({},a,t.value))}))},w=function(){var e=Object(O.a)(N.a.mark((function e(){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.password!==m.verifyPassword&&v((function(e){return Object(o.a)(Object(o.a)({},e),{},{verifyPassword:"passwords dont match"})})),a=m.email,n=m.password,e.next=4,t({email:a,password:n});case 4:if(!(r=e.sent).err){e.next=8;break}return v((function(e){return Object(o.a)(Object(o.a)({},e),{},{email:r.err})})),e.abrupt("return");case 8:i(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"right-side-signup flex col"},r.a.createElement("section",{className:"signup-form flex col"},r.a.createElement("h3",{className:"form-title"},"Sign Up"),r.a.createElement("label",{className:"flex align-center"},r.a.createElement("i",{className:"form-icon fas fa-at"}),r.a.createElement("input",{id:"email",type:"text",placeholder:"Email",onChange:g,value:m.email}),r.a.createElement("h6",{className:"err-label"},h.email)),r.a.createElement("label",{className:"flex align-center"},r.a.createElement("i",{className:"form-icon fas fa-lock"}),r.a.createElement("input",{id:"password",type:"password",placeholder:"Password",onChange:g,value:m.password}),r.a.createElement("h6",{className:"err-label"},h.password)),r.a.createElement("label",{className:"flex align-center"},r.a.createElement("i",{className:"form-icon fas fa-lock"}),r.a.createElement("input",{id:"verifyPassword",type:"password",placeholder:"Repeat password",onChange:g,value:m.verifyPassword}),r.a.createElement("h6",{className:"err-label"},h.verifyPassword)),r.a.createElement("button",{onClick:w,className:"signup-btn"},"Sign up")),s&&r.a.createElement(b.a,{to:"/"}))}));a(121);function W(){return r.a.createElement("div",{className:"main-nav flex col"},r.a.createElement("i",{className:"fas fa-home"}),r.a.createElement("i",{className:"fab fa-rocketchat"}),r.a.createElement("i",{className:"fas fa-database"}),r.a.createElement("i",{className:"fas fa-sitemap"}),r.a.createElement("i",{className:"far fa-address-card"}))}function V(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(E.a)(s,2),u=i[0],l=i[1];return r.a.createElement("div",{className:"login-page flex"},r.a.createElement(W,null),r.a.createElement("section",{className:"left-side flex"},r.a.createElement("h3",{className:"logo"},"Parrot")),r.a.createElement("section",{className:"right-side flex col "+(a?"show-signup":"")},r.a.createElement(L,{loginHandler:l}),r.a.createElement("section",{className:"toggle-forms-btn",onClick:function(){c(!a),console.log(a)}},r.a.createElement("span",null,"Sign Up"),r.a.createElement("span",null,"Log In")),r.a.createElement(H,null)),u&&r.a.createElement(b.a,{to:"/"}))}a(122);function B(){return r.a.createElement("div",null,r.a.createElement("h1",null,"not found!"))}a(123);var G=a(82),q=a.n(G)()("/");var J={on:function(e,t){q.on(e,t)},emit:function(e,t,a){q.emit(e,t,a)}},Y=a(47).chatService,K=function(e){return{type:"ADD_MESSAGE",message:e}},X=function(e){return{type:"SET_CHAT_DATA",chatData:e}},$=function(e){return{type:"ADD_NEW_MEMBERS",members:e}},z=function(e){return{type:"REMOVE_MEMBER_FROM_CHANNEL",member:e}},Q=function(e){return{type:"REMOVE_CHANNEL",channelId:e}},Z=function(e){return{type:"REMOVE_MSG",msgId:e}},ee=function(e){return{type:"TOGGLE_PINNED",msgId:e}},te=function(e,t){return{type:"ADD_REACTION",msgId:e,reaction:t}},ae=function(e,t){return{type:"ADD_REPLY",msgId:e,reply:t}};function ne(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n,r){var c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n(ee(e)),c=r().chatMessagesReducer,!t){a.next=8;break}return a.next=6,Y.updatePrivateChatData(c);case 6:a.next=10;break;case 8:return a.next=10,Y.updatePublicChatData(c);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()}function re(){return(re=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.get("workspace/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(O.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.put("workspace/update/".concat(t),a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se={getWorkSpaceData:function(e){return re.apply(this,arguments)},updateUserInWorkspace:function(e,t){return ce.apply(this,arguments)}},ie=function(e){return{type:"SET_USERS_STATUS",users:e}};a(152);var ue=a(196);a(153),a(154);function le(e){var t=e.children,a=e.close,n=e.title,c=e.width,s=e.height;return r.a.createElement("div",{className:"popup-window"},r.a.createElement("section",{className:"close-modal-screen",onClick:function(){return a(!1)}}),r.a.createElement("section",{className:"popup-box flex col",style:{"--width":c,"--height":s}},r.a.createElement("header",{className:"flex space-between align-center"},r.a.createElement("h2",null,n),r.a.createElement("i",{className:"far fa-times-circle",onClick:function(){return a(!1)}})),t))}var oe={updateUser:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.updateUser(e);case 3:a(R(e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},userUpdateInWP:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().workSpaceReducer._id,t.next=3,se.updateUserInWorkspace(r,e);case 3:a({type:"UPDATE_USER_SETTINGS",user:e});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},me=Object(i.b)(null,oe)((function(e){var t=e.close,a=e.user,c=e.updateUser,s=e.userUpdateInWP;console.log(a);var i=Object(n.useState)(a),u=Object(E.a)(i,2),l=u[0],m=u[1],p=function(e){var t=e.target;m((function(e){return Object(o.a)(Object(o.a)({},e),{},{preferences:Object(o.a)(Object(o.a)({},e.preferences),{},Object(x.a)({},t.id,t.value))})}))},f=function(){var e=Object(O.a)(N.a.mark((function e(){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.preferences,n=a.nickName,r=a.avatarImg,e.next=3,c(l);case 3:return e.next=5,s({_id:l._id,nickName:n,avatarImg:r});case 5:t(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(le,{close:t,title:"Your Settings",width:"550px",height:"400px"},r.a.createElement("div",{className:"user-settings"},r.a.createElement("section",{className:"user-data-inputs"},r.a.createElement("input",{type:"text",placeholder:"Full Name"}),r.a.createElement("input",{id:"nickName",type:"text",placeholder:"Nickname ",value:l.preferences.nickName,onChange:p}),r.a.createElement("input",{type:"text",placeholder:"What i do"}),r.a.createElement("input",{id:"avatarImg",type:"text",placeholder:"Profile image url",value:l.preferences.avatarImg,onChange:p})),r.a.createElement("img",{src:l.preferences.avatarImg,alt:"Profile pic"})),r.a.createElement("button",{className:"btn-save",onClick:f},"Save"))}));function pe(){var e=Object(i.c)((function(e){return e.userReducer})),t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],s=a[1];return r.a.createElement("div",{className:"app-header flex-center"},r.a.createElement("input",{className:"main-search-bar",type:"text",placeholder:"Search In Parrot..."}),e.isAuth&&r.a.createElement(ue.a,{className:"avatar",variant:"square",alt:e.preferences.nickName,src:e.preferences.avatarImg,"data-name":e.preferences.nickName,onClick:function(){return s(!c)}}),r.a.createElement("span",{className:"profile-tag flex-center"},e.preferences.nickName),c&&r.a.createElement(me,{close:s,user:e}))}a(155),a(156);function fe(e){var t=e.items,a=e.label,c=e.itemIcon,s=e.itemName,u=e.children,l=e.closeNavMobile,m=Object(n.useState)(!0),p=Object(E.a)(m,2),f=p[0],d=p[1],h=Object(n.useState)(!1),v=Object(E.a)(h,2),b=v[0],g=v[1],N=Object(n.useContext)(mt).updateChatToRender,O=Object(i.c)((function(e){return e.workSpaceReducer})).onlineUsers;Object(n.useEffect)((function(){t[0]&&!t[0].type&&N({_id:t[0]._id})}),[]);return r.a.createElement("ul",{className:"dropdown-container clean-list"},b&&r.a.Children.map(u,(function(e){return r.a.cloneElement(e,{close:g})})),r.a.createElement("section",{className:"drop-down-header flex"},r.a.createElement("i",{id:"channel-tag",className:"fas fa-caret-right"+(f?" open":""),onClick:function(){return d(!f)}}),r.a.createElement("span",{onClick:function(){return d(!f)},htmlFor:"channel-tag"},a),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return g(!0)}})),f&&O&&("directMsgName"===s&&(t=t.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{isOnline:O.includes(e._id)})}))),t).map((function(e){return r.a.createElement("li",{className:"drop-item",key:e._id,onClick:function(t){return function(e,t){var a=e.target;document.querySelectorAll(".drop-item").forEach((function(e){return e.classList.remove("selected")})),a.classList.add("selected"),l(!1),N(t)}(t,{type:e.type,_id:e._id})}},r.a.createElement("i",{className:c+(e.isOnline?" online":"")}),e[s])})))}a(157);var de={addChannelToUser:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){var r,c,s,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.chatService.createNewChannel(e);case 3:return r=t.sent,c=r._id,s=r.channelName,i={_id:c,channelName:s},t.next=9,a(P(i));case 9:return t.next=11,T.updateUser(n().userReducer);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}},he=Object(i.b)((function(e){return{userData:e.userReducer}}),de)((function(e){var t=e.close,a=e.addChannelToUser,c=e.userData,s=Object(n.useState)({channelName:"",channelDesc:"",channelThumbnail:"https://d2slcw3kip6qmk.cloudfront.net/marketing/techblog/how-to-plan-a-programming-competition-header@2x.png",createdAt:Date.now(),createdBy:Object(o.a)(Object(o.a)({},c.preferences),{},{_id:c._id}),messages:[]}),i=Object(E.a)(s,2),u=i[0],l=i[1],m=function(e){var t=e.target,a=t.value;l((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(x.a)({},t.id,a))}))},p=function(){var e=Object(O.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.channelName){e.next=2;break}return e.abrupt("return");case 2:t(!1),n=f(u),a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e={nickName:c.preferences.nickName,avatarImg:c.preferences.avatarImg,_id:c._id};return Object(o.a)(Object(o.a)({},u),{},{sharedUsers:[e]})};return r.a.createElement("div",{className:"create-channel"},r.a.createElement(le,{close:t,title:"Create New Channel",width:"500px",height:"500px"},r.a.createElement("p",null,"Channels are the place where you can group togther your frindes and share your thoughts with each other.. Try to give it a unique name around a topic - #Homework for example.."),r.a.createElement("label",{htmlFor:"channelName"},"Name"),r.a.createElement("input",{type:"text",placeholder:"# Channel Name",id:"channelName",onChange:m,autoComplete:"off"}),r.a.createElement("label",{htmlFor:"channelDesc"},"Description (optimal)"),r.a.createElement("input",{type:"text",id:"channelDesc",onChange:m}),r.a.createElement("button",{className:"btn-create"+(u.channelName?" sucsses":""),onClick:p},"Create")))}));a(158),a(159),a(160);function ve(e){var t=e.placeholder,a=e.handler,n=e.value,c=e.height,s=e.width;return r.a.createElement("div",{className:"input-box"},r.a.createElement("input",{type:"text",placeholder:t,value:n,onChange:function(e){return a(e.target.value)},style:{width:s,height:c}}))}function be(e){var t=e.whenClicked,a=e.customStyle,c=e.showJoinStatus,s=Object(i.c)((function(e){return e.workSpaceReducer})).sharedUsers,u=Object(n.useState)(""),l=Object(E.a)(u,2),o=l[0],m=l[1],p=Object(i.c)((function(e){return c?e.chatMessagesReducer.sharedUsers:e.userReducer.directMessages})),f=Object(i.c)((function(e){return e.userReducer._id}));return r.a.createElement("div",{className:"select-members-container flex col"},r.a.createElement(ve,{placeholder:"Search In Members",handler:function(e){m(e)},value:o}),r.a.createElement("div",{className:a||"user-container-default"},s&&(s.forEach((function(e){e.isJoined=p.some((function(t){return t._id===e._id}))})),s.filter((function(e){return e.nickName.toLowerCase().includes(o.toLowerCase())&&e._id!==f}))).map((function(e){return r.a.createElement("section",{className:"user-preview flex"+(e.isJoined?" disable":""),key:e._id,onClick:function(){return t(e)}},r.a.createElement(ue.a,{variant:"square",src:e.avatarImg}),r.a.createElement("span",null,e.nickName),c&&r.a.createElement("span",{className:"user-status"},e.isJoined?"Already in this channel":""))}))))}var Ee={addPMToUser:U},ge=Object(i.b)((function(e){return{userData:e.userReducer}}),Ee)((function(e){var t=e.close,a=e.addPMToUser,c=e.userData.directMessages,s=Object(n.useContext)(mt).updateChatToRender,i=function(){var e=Object(O.a)(N.a.mark((function e(n){var r,i,u,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n._id,i=n.nickName,u=n.avatarImg,c.some((function(e){return e._id===r}))){e.next=5;break}return l={type:"direct",_id:r,directMsgName:i,avatarImg:u,messages:[]},e.next=5,a(l);case 5:s({type:"direct",_id:r}),t(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(le,{close:t,title:"Send Direct Message",width:"500px",height:"500px"},r.a.createElement("section",{className:"overflow-hidden max-width flex col"},r.a.createElement(be,{whenClicked:i}))))}));var Ne=Object(i.b)((function(e){return{userData:e.userReducer}}),null)((function(e){var t=e.userData,a=e.workSpace,c=e.isOpenOnMobile,s=Object(n.useContext)(mt).setOpenSideNavOnMobile;return r.a.createElement("div",{className:"side-nav flex col"+(c?" open":"")},r.a.createElement("section",{className:"workspace-name flex"},r.a.createElement("span",null,a.name),r.a.createElement("i",{className:"far fa-edit"})),t&&r.a.createElement(fe,{items:t.channels,label:"Channels",itemIcon:"fab fa-slack-hash",itemName:"channelName",closeNavMobile:s},r.a.createElement(he,null)),t&&r.a.createElement(fe,{items:t.directMessages,label:"Direct Messages",itemIcon:"far fa-circle",itemName:"directMsgName",closeNavMobile:s},r.a.createElement(ge,null)))})),Oe=(a(161),a(162),a(211)),xe=(a(163),a(210));var we={addPMToUser:U},je=Object(i.b)((function(e){return{workSpaceData:e.workSpaceReducer,userData:e.userReducer}}),we)((function(e){var t=e.workSpaceData,a=e.userData,c=e.addPMToUser,s=e.userId,i=e.close,u=e.clickPos,l=t.sharedUsers.find((function(e){return e._id===s})),o=a.directMessages,m=Object(n.useContext)(mt).updateChatToRender,p=Object(n.useContext)(ut),f=function(){var e=Object(O.a)(N.a.mark((function e(){var t,a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l._id,a=l.userName,n=l.avatarImg,o.some((function(e){return e._id===t}))){e.next=5;break}return r={type:"direct",_id:t,directMsgName:a,avatarImg:n,messages:[]},e.next=5,c(r);case 5:m({type:"direct",_id:t}),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=(new Date).toLocaleTimeString();return r.a.createElement("div",{className:"user-preview-popup-wrapper flex col",style:{top:u.y+"px",left:u.x+"px"}},r.a.createElement("div",{className:"close-screen",onClick:function(){return i(!1)}}),l&&r.a.createElement("div",{className:"preview-content flex col"},r.a.createElement("img",{src:l.avatarImg,alt:"user-image"}),r.a.createElement("span",{className:"username"},l.userName),r.a.createElement("span",{className:"view-profile",onClick:function(){p(l),i(!1)}},"View full profile"),r.a.createElement("span",{className:"local-time"},"Local time:",r.a.createElement("br",null),d),r.a.createElement("button",{className:"btn-pm-message",onClick:f},"Message")),!l&&r.a.createElement(xe.a,null))})),ye=(a(164),a(165),a(83)),ke=a.n(ye);function Se(e){var t=e.addReaction,a=e.close,c=Object(n.useRef)(null);Object(n.useEffect)((function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}}));var s=function(e){console.log("hi"),c.current&&!c.current.contains(e.target)&&a(!1)};return r.a.createElement("div",{className:"reactions-wrapper flex col space-between",ref:c},r.a.createElement("input",{className:"search-input",type:"text",placeholder:"Search",autoFocus:!0}),r.a.createElement("section",{className:"reactions-container"},ke.a.map((function(e,a){return r.a.createElement("span",{key:a,onClick:function(){return t(e)}},e)}))))}var Ce={toggleMsgPinnedStatus:ne,removeMsgFromChat:function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n,r){var c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n(Z(e)),c=r().chatMessagesReducer,!t){a.next=8;break}return a.next=6,Y.updatePrivateChatData(c);case 6:a.next=10;break;case 8:return a.next=10,Y.updatePublicChatData(c);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()},addReactionToMsg:function(e,t,a){return function(){var n=Object(O.a)(N.a.mark((function n(r,c){var s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r(te(e,t)),s=c().chatMessagesReducer,!a){n.next=8;break}return n.next=6,Y.updatePrivateChatData(s);case 6:n.next=10;break;case 8:return n.next=10,Y.updatePublicChatData(s);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}()}},De=Object(i.b)(null,Ce)((function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],s=a[1],i=function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addReactionToMsg(e.msg.id,a,e.isPrivate);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return!e.shortForm&&r.a.createElement("div",{className:"msg-pop-nav flex-center"},r.a.createElement("i",{className:"far fa-icons",onClick:function(){return s(!c)}}),r.a.createElement("i",{className:"fal fa-comment-alt-lines",onClick:function(){return e.replay(e.msg.id)}}),r.a.createElement("i",{className:"fal fa-thumbtack"+(e.msg.isPinned?" pinned":""),onClick:function(){return e.toggleMsgPinnedStatus(e.msg.id,e.isPrivate)}}),r.a.createElement("i",{className:"fas fa-eraser",onClick:function(){return e.removeMsgFromChat(e.msg.id,e.isPrivate)}}),c&&r.a.createElement(Se,{addReaction:i,close:s}))})),Te=a(51),_e=a.n(Te),Me=a(84),Re=a.n(Me);function Pe(e){var t=e.msg,a=e.isPrivate,c=e.replay,s=e.isThread,i=e.shortNavForm,u=t.sentBy,l=t.createdAt,o=t.messageTxt,m=t.avatarImg,p=t.userId,f=Object(n.useState)(null),d=Object(E.a)(f,2),h=d[0],v=d[1],b=Object(n.useState)(!1),g=Object(E.a)(b,2),N=(g[0],g[1],Object(n.useState)(!1)),O=Object(E.a)(N,2),x=O[0],w=O[1],j=Object(n.useState)({x:null,y:null}),y=Object(E.a)(j,2),k=y[0],S=y[1];return r.a.createElement("div",{className:"msg-layout",onMouseEnter:function(){return w(!0)},onMouseLeave:function(){return w(!1)}},r.a.createElement("section",{className:"user-avatar flex justify-center"},r.a.createElement(ue.a,{className:"avatar",src:m})),r.a.createElement("section",{className:"msg-body"},r.a.createElement("section",{className:"msg-details"},r.a.createElement("span",{className:"user-name",onClick:function(e){var t=e.clientX,a=e.clientY;t+300>window.innerWidth&&(t=a-300),a+350>window.innerHeight&&(a-=350),S({x:t,y:a}),v(!0)}},u),r.a.createElement("span",{className:"msg-created"},_e()(new Date(l)).fromNow())),r.a.createElement("section",{className:"msg-content"},Re()(o)),r.a.createElement("section",{className:"msg-reaction-container flex"},Object.entries(t.reactions).map((function(e){var t=Object(E.a)(e,2),a=t[0],n=t[1];return r.a.createElement("section",{className:"reaction-item flex",key:a},r.a.createElement("span",null,a),r.a.createElement("span",null,n))}))),!s&&t.replies.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"replies-bar flex align-center",onClick:function(){return c(t.id)}},r.a.createElement(Oe.a,{max:3,spacing:"medium"},function(){var e=[];return t.replies.reduce((function(t,a){return e.includes(a.userId)||(e.push(a.userId),t.push(a)),t}),[])}().map((function(e){return r.a.createElement(ue.a,{className:"custom-avatar",src:e.avatarImg,key:e.userId})}))),r.a.createElement("section",{className:"reply-title-head"},1===t.replies.length?"1 reply":"".concat(t.replies.length," replies "),r.a.createElement("span",{className:"on-hover"}," View Thread"),r.a.createElement("span",{className:"not-hovered"}," Last reply ".concat(_e()(new Date(t.replies.slice(-1)[0].createdAt)).fromNow()))),r.a.createElement("i",{className:"far fa-angle-right"})))),h&&r.a.createElement(je,{userId:p,close:v,clickPos:k}),x&&r.a.createElement(De,{msg:t,isPrivate:a,replay:c,shortForm:i}))}var Ie=a(85),Ue=a(28),Ae=a(87),Le=a(86);a(179),a(180);function Fe(e){var t=e.handleChange,a=e.sendMessage,c=e.isReply,s=Object(n.useRef)(null),i=Object(n.useState)(!1),u=Object(E.a)(i,2),l=u[0],o=u[1],m=Object(n.useState)(0),p=Object(E.a)(m,2),f=p[0],d=p[1],h=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("click"===t.type||!("Enter"!==t.key||"Enter"===t.key&&t.shiftKey)&&s.current.innerText){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a();case 4:s.current.innerText="";case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement("div",{className:"editable-text",onInput:function(){var e=s.current.innerText;e=e.replace(/\n+/g,"<br>"),t(e)},onKeyPress:h,onKeyDown:function(){return d(document.getSelection().anchorOffset)},onSelect:function(){return d(document.getSelection().anchorOffset)},ref:s,contentEditable:"true","data-placeholder":c?"Replay...":"Send New Message"}),r.a.createElement("section",{className:"new-msg-actions flex"},r.a.createElement("i",{className:"far fa-laugh-wink",onClick:function(){return o(!l)}}),r.a.createElement("i",{className:"fas fa-paperclip"}),r.a.createElement("i",{className:"far fa-paper-plane",onClick:h}),l&&r.a.createElement(Se,{addReaction:function(e){var a=s.current.innerText;s.current.innerText=a.substring(0,f)+e+a.substring(f),t(s.current.innerText)},close:o})))}var He=a(212),We=function(e){Object(Ae.a)(a,e);var t=Object(Le.a)(a);function a(){var e;Object(Ie.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={msgToSend:{messageTxt:""},typingTimer:null},e.handleChange=function(t){e.emitSocketEvents(),e.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{msgToSend:{messageTxt:t}})}))},e.onSendMessage=Object(O.a)(N.a.mark((function t(){var a,n,r,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.chatType,n=e.props.loggedUser.preferences,r=n.nickName,c=n.avatarImg,t.next=4,e.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{msgToSend:Object(o.a)(Object(o.a)({},t.msgToSend),{},{id:Object(He.a)(),createdAt:Date.now(),sentBy:r,avatarImg:c,userId:e.props.loggedUser._id,isPinned:!1,reactions:{},replies:[]})})}));case 4:return t.next=6,e.sendMessage(a);case 6:e.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{msgToSend:{messageTxt:""}})}));case 7:case"end":return t.stop()}}),t)}))),e.sendMessage=function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r,c,s,i,u;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.chatData._id,r=e.state.msgToSend,c=e.props,s=c.replyMsgId,i=c.isPrivate,!s){t.next=8;break}return t.next=6,e.props.addReplyToMsg(s,r,i);case 6:t.next=15;break;case 8:if("direct"!==a){t.next=13;break}return t.next=11,e.props.sendPrivateMessage(r);case 11:t.next=15;break;case 13:return t.next=15,e.props.sendPublicMessage(r);case 15:u=e.props.loggedUser._id,J.emit("chatUpdated",{chatType:a,_id:n,userId:u});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.emitSocketEvents=function(){e.state.typingTimer&&clearTimeout(e.state.typingTimer);var t=e.props.chatData._id,a=e.props.loggedUser.preferences.nickName,n=setTimeout((function(){J.emit("userStoppedTyping",t)}),2e3);e.setState({typingTimer:n}),J.emit("chatTyping",{_id:t,userName:a})},e}return Object(Ue.a)(a,[{key:"render",value:function(){var e=this.props.replyMsgId;return r.a.createElement("div",{className:"message-bar"+(e?"":" main-chat")},r.a.createElement(Fe,{handleChange:this.handleChange,sendMessage:this.onSendMessage,isReply:this.props.replyMsgId}))}}]),a}(n.Component),Ve={sendPublicMessage:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(K(e)),r=n().chatMessagesReducer,t.next=5,Y.updatePublicChatData(r);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()},sendPrivateMessage:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(K(e)),t.next=4,Y.updatePrivateChatData(n().chatMessagesReducer);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}()},addReplyToMsg:function(e,t,a){return function(){var n=Object(O.a)(N.a.mark((function n(r,c){var s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r(ae(e,t)),s=c().chatMessagesReducer,!a){n.next=8;break}return n.next=6,Y.updatePrivateChatData(s);case 6:n.next=10;break;case 8:return n.next=10,Y.updatePublicChatData(s);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}()}},Be=Object(i.b)((function(e){return{loggedUser:e.userReducer,chatData:e.chatMessagesReducer}}),Ve)(We);a(181);var Ge={addNewMembers:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a($(e)),t.next=3,Y.updatePublicChatData(n().chatMessagesReducer);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},qe=Object(i.b)((function(e){return{chatData:e.chatMessagesReducer}}),Ge)((function(e){var t=e.toggleState,a=e.addNewMembers,n=e.chatData,c=function(){var e=Object(O.a)(N.a.mark((function e(t){var r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n._id,c=n.channelName,J.emit("addUserToChannel",{channel:{_id:r,channelName:c},userId:t._id}),a(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(le,{close:t,width:"550px",height:"300px",title:"Add Member To Channel"},r.a.createElement("section",{className:"max-width flex col"},r.a.createElement(be,{customStyle:"user-container-custom",showJoinStatus:!0,whenClicked:c})))}));a(182);var Je={remove:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(z(e)),t.next=3,Y.updatePublicChatData(n().chatMessagesReducer);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},Ye=Object(i.b)((function(e){return{chatData:e.chatMessagesReducer,loggedUser:e.userReducer}}),Je)((function(e){var t=e.close,a=e.chatData,c=e.remove,s=e.loggedUser,i=Object(n.useState)(""),u=Object(E.a)(i,2),l=u[0],o=u[1],m=Object(n.useState)(null),p=Object(E.a)(m,2),f=p[0],d=p[1],h=Object(n.useState)({x:null,y:null}),v=Object(E.a)(h,2),b=v[0],g=v[1],x="".concat(a.sharedUsers.length," members in ").concat(a.channelName),w=function(){var e=Object(O.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,c(n);case 3:J.emit("removeUserFromChannel",{channelId:a._id,userId:n._id});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(le,{close:t,width:"500px",height:"600px",title:x},r.a.createElement(ve,{value:l,handler:function(e){o(e)},placeholder:"Search in channel members...",width:"450px"}),r.a.createElement("ul",{className:"channel-members-container clean-list"},a&&a.sharedUsers.filter((function(e){return e.nickName.toLowerCase().includes(l)})).map((function(e){return r.a.createElement("li",{key:e._id,className:"flex align-center",onClick:function(t){return function(e,t){var a=e.clientX,n=e.clientY;a+300>window.innerWidth&&(a-=300),n+350>window.innerHeight&&(n-=350),g({x:a,y:n}),d(t)}(t,e._id)}},r.a.createElement(ue.a,{variant:"square",src:e.avatarImg}),r.a.createElement("span",null,e.nickName),e._id!==s._id&&s._id===a.createdBy._id&&r.a.createElement("button",{className:"btn-remove",onClick:function(t){return w(t,e)}},"Remove"))}))),f&&r.a.createElement(je,{userId:f,close:t,clickPos:b})))}));function Ke(e){var t=e.name,a=e.toggleDetails,c=e.channelMembers,s=e.toggleNavBar,i=Object(n.useState)(!1),u=Object(E.a)(i,2),l=u[0],o=u[1],m=Object(n.useState)(!1),p=Object(E.a)(m,2),f=p[0],d=p[1];return r.a.createElement("div",{className:"channel-bar flex"},r.a.createElement("i",{className:"far fa-newspaper nav-toggle-btn",onClick:function(){return s(!0)}}),r.a.createElement("section",{className:"left-side"},r.a.createElement("span",null,"#",t,r.a.createElement("i",{className:"far fa-star"})),r.a.createElement("span",null,"Add a Topic")),r.a.createElement("section",{className:"right-side flex"},r.a.createElement("section",{className:"members-avatars",onClick:function(){return d(!0)}},r.a.createElement(Oe.a,{max:3,spacing:"medium"},c&&c.map((function(e){return r.a.createElement(ue.a,{src:e.avatarImg,key:e._id})})))),c&&r.a.createElement("i",{className:"far fa-user-plus",onClick:function(){return o(!0)}}),r.a.createElement("i",{className:"fal fa-info-circle",onClick:a})),l&&r.a.createElement(qe,{toggleState:o}),f&&r.a.createElement(Ye,{close:d}))}a(183);function Xe(){var e=Object(n.useState)(null),t=Object(E.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){J.on("userIsTyping",(function(e){var t=e.userName;c(t)})),J.on("noTypingInChat",(function(){c(null)}))}),[]),r.a.createElement("div",{className:"typing-box-indication"},a&&r.a.createElement("span",null," ",a," is Typing..."))}a(184),a(185);function $e(e){var t=e.name,a=e.children,c=e.counter,s=Object(n.useState)(!1),i=Object(E.a)(s,2),u=i[0],l=i[1];return r.a.createElement("div",{className:"chat-nav-item"},r.a.createElement("header",{className:"header-item-name flex space-between",onClick:function(){return l(!u)}},r.a.createElement("span",null,t),c>=0&&r.a.createElement("span",{className:"item-counter"},c),r.a.createElement("i",{className:"fas fa-caret-"+(u?"down":"right")})),u&&r.a.createElement("section",{className:"item-content"},a))}a(186);function ze(e){var t=e.chatData;return t&&r.a.createElement("div",{className:"about-chat"},r.a.createElement("section",{className:"sub-item"},r.a.createElement("span",{className:"title"},"Topic"),r.a.createElement("span",null,"this chat topic is...")),r.a.createElement("section",{className:"sub-item"},r.a.createElement("span",{className:"title"},"Description"),r.a.createElement("span",null,t.channelDesc)),r.a.createElement("section",{className:"sub-item"},r.a.createElement("span",{className:"title"},"Created by"),r.a.createElement("span",{className:"created flex align-center"},r.a.createElement(ue.a,{variant:"square",src:t.createdBy.avatarImg}),t.createdBy.nickName+", at "+new Date(t.createdAt).toLocaleDateString())))}a(187);function Qe(e){var t=e.chatData;return console.log(t),r.a.createElement("div",{className:"about-chat"},r.a.createElement("section",{className:"sub-item  "},r.a.createElement("span",{className:"title"},"Display Name"),r.a.createElement("span",null,t.directMsgName)),r.a.createElement("section",{className:"sub-item "},r.a.createElement("span",{className:"title"},"Local Time"),r.a.createElement("span",null,(new Date).toLocaleTimeString())))}a(188);function Ze(){var e=Object(i.c)((function(e){return e.chatMessagesReducer})).sharedUsers,t=Object(n.useState)(null),a=Object(E.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)({x:null,y:null}),l=Object(E.a)(u,2),o=l[0],m=l[1];return r.a.createElement("div",{className:"members-list flex col"},r.a.createElement("ul",{className:"members-container clean-list"},e&&e.map((function(e){return r.a.createElement("li",{key:e._id,className:"flex align-center",onClick:function(t){return function(e,t){var a=e.clientX,n=e.clientY;a+300>window.innerWidth&&(a=n-300),n+350>window.innerHeight&&(n-=350),m({x:a,y:n}),s(t)}(t,e._id)}},r.a.createElement(ue.a,{variant:"square",src:e.avatarImg}),r.a.createElement("span",null,e.nickName))}))),c&&r.a.createElement(je,{userId:c,close:s,clickPos:o}))}a(189);var et={toggleMsgPinnedStatus:ne},tt=Object(i.b)(null,et)((function(e){var t=e.items,a=e.toggleMsgPinnedStatus;return t.length<=0?r.a.createElement("h4",{className:"no-pinned-items"},"No items have been pinned yet! Open the context menu on important messages or files and choose Pin to this conversation to stick them here."):r.a.createElement("div",{className:"pinned-items-container"},t.map((function(e){return r.a.createElement("section",{className:"pinned-item flex col justify-center",key:e.id},r.a.createElement("header",{className:"flex"},r.a.createElement(ue.a,{className:"custom-avatar",src:e.avatarImg}),r.a.createElement("span",null,e.sentBy),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return a(e.id)}})),r.a.createElement("section",{className:"item-content"},e.messageTxt),r.a.createElement("section",{className:"item-comments flex"},r.a.createElement("section",{className:"reactions"},Object.keys(e.reactions).slice(0,2),Object.keys(e.reactions).length," reactions")),r.a.createElement("section",{className:"item-creation"},r.a.createElement("span",null,new Date(e.createdAt).toLocaleDateString()," at"," ",new Date(e.createdAt).toLocaleTimeString()," |"),r.a.createElement("span",null,"View message")))})))}));var at={removeChannel:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.removeChannel(e);case 2:a(Q(e));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removePrivateMessage:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REMOVE_PRIVATE_CHAT",id:e}),t.next=3,T.updateUser(n().userReducer);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},nt=Object(i.b)(null,at)((function(e){var t=e.chatName,a=e.closeSideNav,c=e.chatType,s=e.removeChannel,i=e.removePrivateMessage,u=e.chatData,l=Object(n.useState)(!1),o=Object(E.a)(l,2),m=o[0],p=o[1],f="channel"===c?u.channelThumbnail:u.avatarImg,d=u.messages.filter((function(e){return e.isPinned})),h=function(){var e=Object(O.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u._id,"channel"!==c){e.next=6;break}return e.next=4,s(t);case 4:e.next=8;break;case 6:return e.next=8,i(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"chat-side-details flex col"},r.a.createElement("header",{className:"main-nav-header flex space-between"},r.a.createElement("section",{className:"side-nav-chatname flex col"},r.a.createElement("span",{className:"header-main-title bold"},"Details"),r.a.createElement("span",{className:"header-sub-title"},t)),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return a(!1)}})),r.a.createElement("section",{className:"chat-thumbnail flex-center"},r.a.createElement("img",{src:f,alt:""})),r.a.createElement("section",{className:"actions-container flex-center"},"channel"===c&&r.a.createElement("section",{className:"action-item flex-center col"},r.a.createElement("i",{className:"far fa-user-plus",onClick:function(){return p(!0)}}),r.a.createElement("span",null,"Add")),r.a.createElement("section",{className:"action-item flex-center col",onClick:h},r.a.createElement("i",{className:"fas fa-trash-alt"}),r.a.createElement("span",null,"Delete"))),u&&r.a.createElement("section",{className:"items-container"},r.a.createElement($e,{name:"About"},"channel"===c?r.a.createElement(ze,{chatData:u}):r.a.createElement(Qe,{chatData:u})),u.sharedUsers&&r.a.createElement($e,{name:"Members",counter:u.sharedUsers.length},r.a.createElement(Ze,null)),r.a.createElement($e,{name:"Pinned",counter:d.length},r.a.createElement(tt,{items:d}))),m&&r.a.createElement(qe,{toggleState:p}))}));a(190);function rt(e){var t=e.type,a=e.data,n="channel"===t?a.channelName:a.directMsgName;return r.a.createElement("div",{className:"first-msg-container"},r.a.createElement("section",{className:"info flex align-center"},"channel"===t?r.a.createElement("img",{className:"channel-pic",src:a.channelThumbnail}):r.a.createElement(ue.a,{className:"custom-avatar",variant:"square",src:a.avatarImg}),r.a.createElement("span",null,n)),r.a.createElement("section",{className:"msg-txt"},"This is the very beginning of your direct message history with",r.a.createElement("span",null," @",n)))}a(191);var ct={addPMToUser:U},st=Object(i.b)((function(e){return{userData:e.userReducer}}),ct)((function(e){var t=e.userToShow,a=e.closeProfile,c=e.addPMToUser,s=e.userData.directMessages,i=Object(n.useContext)(mt).updateChatToRender,u=function(){var e=Object(O.a)(N.a.mark((function e(){var a,n,r,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t._id,n=t.userName,r=t.avatarImg,s.some((function(e){return e._id===a}))){e.next=5;break}return u={type:"direct",_id:a,directMsgName:n,avatarImg:r,messages:[]},e.next=5,c(u);case 5:i({type:"direct",_id:a});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"full-user-profile flex col"},r.a.createElement("header",{className:"main-nav-header flex space-between"},r.a.createElement("span",{className:"header-main-title bold"},"Profile"),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return a(null)}})),r.a.createElement("section",{className:"user-main-detials flex col"},r.a.createElement("section",{className:"user-profile-img-wrapper flex-center"},r.a.createElement("img",{src:t.avatarImg,alt:"profile-pic"})),r.a.createElement("span",{className:"bold"},t.userName)),r.a.createElement("section",{className:"user-actions flex-center"},r.a.createElement("section",{className:"action-item flex-center col",onClick:u},r.a.createElement("i",{className:"far fa-comment-dots"}),r.a.createElement("span",null,"Message"))),r.a.createElement("section",{className:"user-raw-details flex col "},r.a.createElement("span",{className:"detail-title"},"Display Name:"),r.a.createElement("span",{className:"user-display-name"},t.nickName),r.a.createElement("span",{className:"detail-title"},"Local Time"),r.a.createElement("span",{className:"user-local-time"},(new Date).toLocaleTimeString())))}));a(192);function it(e){var t=e.msgId,a=e.closeThread,c=e.chatType,s=e.name,u=Object(n.useState)(!1),l=Object(E.a)(u,2),o=l[0],m=l[1],p=Object(i.c)((function(e){return e.chatMessagesReducer.messages.find((function(e){return e.id===t}))}));return Object(n.useEffect)((function(){"direct"===p.type&&m(!0)}),[p]),p&&r.a.createElement("div",{className:"side-messege-thread"},r.a.createElement("header",{className:"thread-header flex space-between"},r.a.createElement("section",{className:"side-nav-chatname flex col"},r.a.createElement("span",{className:"header-main-title bold"},"Thread"),r.a.createElement("span",{className:"header-sub-title"},s)),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return a(null)}})),r.a.createElement("div",{className:"replies-container flex col"},r.a.createElement("section",{className:"replyed-msg"},r.a.createElement(Pe,{msg:p,isThread:"true",shortNavForm:"true"})),p.replies.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"replies-bar-wrapper flex"},r.a.createElement("h6",null,1===p.replies.length?"1 reply":"".concat(p.replies.length," replies")),r.a.createElement("span",{className:"divider"})),r.a.createElement("section",{className:"replies"},p.replies.map((function(e){return r.a.createElement(Pe,{msg:e,key:e.id,shortNavForm:"true"})})))),r.a.createElement(Be,{replyMsgId:p.id,isPrivate:o,chatType:c})))}var ut=r.a.createContext(null);function lt(e){var t=e.navIsOpen,a=Object(n.useRef)(null),c=Object(i.c)((function(e){return e.chatMessagesReducer})),s=Object(n.useState)(null),u=Object(E.a)(s,2),l=u[0],o=u[1],m=Object(n.useState)(!1),p=Object(E.a)(m,2),f=p[0],d=p[1],h=Object(n.useState)(null),v=Object(E.a)(h,2),b=v[0],g=v[1],N=Object(n.useState)(null),O=Object(E.a)(N,2),x=O[0],w=O[1],j=Object(n.useContext)(mt).setOpenSideNavOnMobile;Object(n.useEffect)((function(){setTimeout(y,100);var e=c&&c.channelName?"channel":"direct";o(e)}),[c]);var y=function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)},k=function(){d(!f),f||w(null)};return c&&r.a.createElement(ut.Provider,{value:w},r.a.createElement("div",{className:"main-view"+(f||x||b?" side-nav-open":"")},t&&r.a.createElement("section",{className:"close-mobile",onClick:function(){return j(!1)}}),r.a.createElement(Ke,{name:c.channelName||c.directMsgName,toggleDetails:k,channelMembers:c.sharedUsers,toggleNavBar:j}),r.a.createElement("section",{ref:a,className:"messages-container"},r.a.createElement(rt,{data:c,type:l}),c.messages.map((function(e){return r.a.createElement(Pe,{key:e.id,msg:e,isPrivate:"direct"===l,replay:g})}))),f&&r.a.createElement(nt,{closeSideNav:k,chatName:c.channelName||c.directMsgName,chatType:l,chatData:c}),x&&r.a.createElement(st,{userToShow:x,closeProfile:w}),b&&r.a.createElement(it,{msgId:b,closeThread:g,chatType:l,name:c.channelName||c.directMsgName}),r.a.createElement(Be,{chatType:l}),r.a.createElement(Xe,null)))}a(193);function ot(){return r.a.createElement("div",{className:"loading-screen"},r.a.createElement(xe.a,null))}var mt=r.a.createContext(null);var pt={getChatData:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.getChatData(e);case 3:return n=t.sent,a(X(n)),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},updateChatData:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(X(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setWorkSpaceData:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.getWorkSpaceData(e);case 3:n=t.sent,a({type:"SET_WORKSPACE_DATA",workSpaceData:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},checkForLoggedUser:function(){return function(){var e=Object(O.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.authUserToken();case 3:(a=e.sent).user?t(M(a.user)):t(M({isAuth:!1})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},updateUsersStatus:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(ie(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserData:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a(M(e))}catch(n){console.log("problem updating user :",e)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ft=Object(i.b)((function(e){return{workSpace:e.workSpaceReducer,userData:e.userReducer}}),pt)((function(e){var t=e.getChatData,a=e.updateChatData,c=e.setWorkSpaceData,s=e.workSpace,i=e.checkForLoggedUser,u=e.userData,l=e.updateUsersStatus,o=e.updateUserData,m=u.isAuth,p=Object(n.useState)(null),f=Object(E.a)(p,2),d=f[0],h=f[1],v=Object(n.useState)(!1),g=Object(E.a)(v,2),x=g[0],w=g[1];Object(n.useEffect)((function(){i(),c("5fa1366f47b949c890bbedd6"),J.emit("newUserLoggedToWorkspace","5fa1366f47b949c890bbedd6",u._id),J.on("newMessagesOnChat",function(){var e=Object(O.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lastUpdatedData,console.log("updataed ! ",n),e.next=4,a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J.on("workSpaceUpdate",function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("5fa1366f47b949c890bbedd6");case 2:return e.next=4,l(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J.on("userDataUpdate",function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[m]);var j=function(){var e=Object(O.a)(N.a.mark((function e(a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:d&&J.emit("disconnectedFromChat",d),J.emit("connectToChat",a,(function(e){h(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App main-layout"},!0===m&&s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,null),r.a.createElement(mt.Provider,{value:{updateChatToRender:j,setOpenSideNavOnMobile:w}},r.a.createElement(Ne,{workSpace:s,isOpenOnMobile:x}),r.a.createElement(lt,{navIsOpen:x}))),"Verifying"===m&&r.a.createElement(ot,null),!m&&r.a.createElement(b.a,{to:"/login"}))})),dt=function(){return r.a.createElement(v.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",component:ft}),r.a.createElement(b.b,{exact:!0,path:"/login",component:V}),r.a.createElement(b.b,{path:"/404",component:B}),r.a.createElement(b.a,{to:"/404"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:h},r.a.createElement(dt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[91,1,2]]]);
//# sourceMappingURL=main.5b007394.chunk.js.map